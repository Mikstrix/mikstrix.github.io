<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PokÃ©mon TCG Pocket Luck Calculator</title>
  
  <!-- Retro, pixel-like font from Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    /* BASIC RESET */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    /* BODY STYLING */
    body {
      font-family: 'Press Start 2P', sans-serif;
      background: #fff7d1 url('https://i.imgur.com/h5dFmCw.png') repeat;
      background-size: 120px 120px;
      color: #333;
      padding: 50px;
      overflow-x: hidden;
    }
    /* MAIN CONTAINER */
    .calculator-container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border: 4px solid #cc0000;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      padding: 40px;
      text-align: center;
      position: relative;
    }
    /* HEADER */
    .pokemon-logo {
      width: 200px;
      margin: 0 auto 20px;
      display: block;
    }
    h1 {
      font-size: 1.6rem;
      margin-bottom: 10px;
      color: #cc0000;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .tagline {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 30px;
    }
    /* TOP SECTION: Total Packs and God Packs */
    .packs-row {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 25px;
    }
    .packs-column {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .packs-column label {
      font-size: 0.8rem;
      color: #000;
      margin-bottom: 5px;
    }
    .packs-column input[type="number"] {
      width: 120px;
      padding: 8px;
      border: 2px solid #000;
      border-radius: 4px;
      background: #fff;
      font-family: 'Press Start 2P', sans-serif;
      font-size: 0.8rem;
      text-align: center;
    }
    /* INPUT GRID for non-diamond pulls (we keep 4â€‘Diamond) */
    <!-â€“ We still track 4â€‘Diamond, 1â€‘Star, 2â€‘Star, 3â€‘Star, and Crown â€“â€“>
    .input-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }
    .input-card {
      background: #ffeb9c;
      border: 2px solid #000;
      border-radius: 8px;
      padding: 15px;
    }
    .input-card label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 8px;
      color: #000;
    }
    .input-card input[type="number"] {
      width: 100%;
      padding: 8px;
      border: 2px solid #000;
      border-radius: 4px;
      background: #fff;
      font-family: 'Press Start 2P', sans-serif;
      font-size: 0.8rem;
      text-align: center;
    }
    /* SUBMIT BUTTON */
    button {
      background: #cc0000;
      border: 3px solid #000;
      color: #fff;
      font-family: 'Press Start 2P', sans-serif;
      font-size: 0.9rem;
      padding: 12px 24px;
      margin-top: 15px;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-radius: 8px;
      transition: background 0.2s ease-in-out;
    }
    button:hover {
      background: #a30000;
    }
    /* RESULTS SECTION (no zoom animations) */
    #results {
      margin-top: 40px;
      padding: 20px;
      background: #ffeb9c;
      border: 3px dashed #000;
      border-radius: 8px;
      display: none;
    }
    #results h2 {
      font-size: 1rem;
      margin-bottom: 15px;
      color: #000;
    }
    .overall-card {
      background: #fff;
      border: 2px solid #cc0000;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
    }
    .overall-card p {
      font-size: 1.2rem;
      color: #cc0000;
      margin-bottom: 10px;
    }
    .overall-card .message {
      font-size: 0.9rem;
      color: #000;
      line-height: 1.3;
    }
    /* BREAKDOWN GRID â€“ set minimum width to help text fit */
    .breakdown-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    .rarity-card {
      background: #fff;
      border: 2px solid #000;
      border-radius: 8px;
      padding: 10px;
      font-size: 0.7rem;
      color: #000;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .breakdown-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .breakdown-icon {
      font-size: 2rem;
      flex-shrink: 0;
    }
    .breakdown-text p {
      margin: 2px 0;
    }
    .rarity-description {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 0.65rem;
      margin-top: 5px;
    }
    .rarity-description img {
      width: 24px;
      height: 24px;
    }
    /* FEATURED POKÃ‰MON SECTION (kept animations for featured PokÃ©mon) */
    .featured-card {
      background: #e0f7ff;
      border: 3px solid #000;
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
      display: none;
      animation: slideIn 1s ease-out forwards;
    }
    @keyframes slideIn {
      0% { opacity: 0; transform: translateX(50px); }
      100% { opacity: 1; transform: translateX(0); }
    }
    .featured-card img {
      width: 250px;
      display: block;
      margin: 0 auto 10px;
      animation: popIn 1s ease forwards;
    }
    @keyframes popIn {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); }
    }
    .featured-card h3 {
      font-size: 1rem;
      margin-bottom: 10px;
      color: #000;
    }
    .featured-card p {
      font-size: 0.8rem;
      color: #000;
      margin: 4px 0;
    }
    .featured-ability {
      font-weight: bold;
      color: #cc0000;
    }
    /* RAINING POKÃ‰MON (optional) */
    .raining-pokemon {
      position: fixed;
      top: -50px;
      pointer-events: none;
      opacity: 0.8;
      animation: fallPokemon 5s linear forwards;
    }
    @keyframes fallPokemon {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(110vh) rotate(360deg); }
    }
    /* CONFETTI (optional) */
    .confetti {
      position: fixed;
      top: -10px;
      width: 10px;
      height: 10px;
      background-color: #f00;
      z-index: 9999;
      opacity: 0.8;
      animation: confettiFall 2.5s linear forwards;
      border-radius: 50%;
    }
    @keyframes confettiFall {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(720deg); }
    }
    /* MODAL POPUP (optional) */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    .modal-content {
      background: #fff;
      border: 4px solid #cc0000;
      border-radius: 12px;
      padding: 30px;
      max-width: 600px;
      text-align: center;
      font-family: 'Press Start 2P', sans-serif;
    }
    .modal-content h2 {
      color: #cc0000;
      margin-bottom: 20px;
      font-size: 1.2rem;
    }
    .modal-content p {
      font-size: 0.8rem;
      margin-bottom: 20px;
      color: #333;
    }
    .modal-content button {
      background: #cc0000;
      border: 3px solid #000;
      color: #fff;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 0.8rem;
      border-radius: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>

  <!-- Optional Introductory Modal -->
  <div class="modal" id="introModal">
    <div class="modal-content">
      <h2>Welcome, Trainer!</h2>
      <p>
        This calculator uses the <strong>official distribution</strong> for normal packs (which include 2â€‘D, 3â€‘D, and 4â€‘D at their average rates)
        and for God Packs (which never spawn Diamond cards). We assume that for Diamond cards you always get the average resultâ€”
        so you only need to enter your pulls for the nonâ€‘Diamond outcomes.
        Please enter your pulls for: 4â€‘Diamond, 1â€‘Star, 2â€‘Star, 3â€‘Star, and Crown.
      </p>
      <button id="closeModal">Let's Go!</button>
    </div>
  </div>

  <div class="calculator-container">
    <!-- HEADER -->
    <img 
      src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png" 
      alt="PokÃ© Ball" 
      class="pokemon-logo"
    >
    <h1>TCG Pocket Luck Calculator</h1>
    <div class="tagline">Official distribution (Diamonds assumed average) â€“ no zoom animations!</div>

    <!-- PACKS ROW -->
    <div class="packs-row">
      <div class="packs-column">
        <label for="totalPacks">Total Packs:</label>
        <input type="number" id="totalPacks" placeholder="0" required>
      </div>
      <div class="packs-column">
        <label for="godPacks">God Packs:</label>
        <input type="number" id="godPacks" placeholder="0" required>
      </div>
    </div>

    <!-- INPUT GRID: User inputs non-diamond pulls (we still track 4â€‘Diamond) -->
    <h3>Your Actual Pulls</h3>
    <div class="input-grid">
      <div class="input-card">
        <label for="fourDiamond">4â€‘Diamond (ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž)</label>
        <input type="number" id="fourDiamond" placeholder="0" required>
      </div>
      <div class="input-card">
        <label for="oneStar">1â€‘Star (â˜…):</label>
        <input type="number" id="oneStar" placeholder="0" required>
      </div>
      <div class="input-card">
        <label for="twoStar">2â€‘Star (â˜…â˜…):</label>
        <input type="number" id="twoStar" placeholder="0" required>
      </div>
      <div class="input-card">
        <label for="threeStar">3â€‘Star (â˜…â˜…â˜…):</label>
        <input type="number" id="threeStar" placeholder="0" required>
      </div>
      <div class="input-card">
        <label for="crown">Crown Rares (ðŸ‘‘):</label>
        <input type="number" id="crown" placeholder="0" required>
      </div>
    </div>

    <!-- SUBMIT BUTTON -->
    <button id="calcButton">Calculate</button>

    <!-- RESULTS SECTION -->
    <div id="results">
      <div class="overall-card">
        <h2>Your Overall Luck Score:</h2>
        <p id="overallLuck"></p>
        <div class="message" id="luckMessage"></div>
      </div>
      <h2>Luck Breakdown by Rarity:</h2>
      <div class="breakdown-grid" id="rarityBreakdown"></div>
    </div>

    <!-- FEATURED POKÃ‰MON SECTION -->
    <div class="featured-card" id="featuredPokemon">
      <h3>Your Featured PokÃ©mon</h3>
      <img id="featuredImg" src="" alt="Featured PokÃ©mon">
      <p id="featuredName"></p>
      <p id="featuredDescription"></p>
      <p class="featured-ability" id="featuredAbility"></p>
    </div>
  </div>

  <script>
    // Close the intro modal
    document.getElementById('closeModal').addEventListener('click', function() {
      document.getElementById('introModal').style.display = 'none';
    });

    // Smooth input navigation
    const allNumberInputs = Array.from(document.querySelectorAll('input[type="number"]'));
    allNumberInputs.forEach((input, idx) => {
      input.addEventListener('focus', () => input.select());
      input.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (idx < allNumberInputs.length - 1) {
            allNumberInputs[idx + 1].focus();
            allNumberInputs[idx + 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }
      });
    });

    /* 
      Official distribution for normal packs (rare slot):
        2â€‘Diamond: ~60%, 3â€‘Diamond: ~20%, 4â€‘Diamond: ~6.66%, 
        1â€‘Star: ~10.3%, 2â€‘Star: ~2%, 3â€‘Star: ~0.9%, Crown: ~0.16%.
      
      Since we assume 2â€‘ and 3â€‘Diamond pulls always come in at average,
      we remove them from user inputs and calculations.
      Therefore, for normal packs we only calculate nonâ€‘Diamond outcomes:
        4â€‘Diamond: 6.66%, 1â€‘Star: 10.3%, 2â€‘Star: 2%, 3â€‘Star: 0.9%, Crown: 0.16%.
      Their total is 20.02%, and renormalized these become:
        4â€‘Diamond: ~33.33%, 1â€‘Star: ~51.45%, 2â€‘Star: ~9.99%, 3â€‘Star: ~4.50%, Crown: ~0.80%.
    */
    const pNormal = {
      fourDiamond: 0.3333,
      oneStar: 0.5145,
      twoStar: 0.0999,
      threeStar: 0.04495,
      crown: 0.0080
    };

    /* 
      For God Packs (which never spawn any Diamond cards), the official distribution is:
        1â€‘Star: 40%, 2â€‘Star: 50%, 3â€‘Star: 5%, Crown: 5%.
      We use these numbers directly.
    */
    const pGod = {
      fourDiamond: 0,
      oneStar: 0.40,
      twoStar: 0.50,
      threeStar: 0.05,
      crown: 0.05
    };

    // For breakdown icons
    const rarityIcons = {
      fourDiamond: "ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž",
      oneStar: "â˜…",
      twoStar: "â˜…â˜…",
      threeStar: "â˜…â˜…â˜…",
      crown: "ðŸ‘‘"
    };

    // Extended per-rarity ratio messages
    function getDescriptionForLuck(ratio) {
      if (ratio < 50) {
        return {
          message: "Very weakâ€”like Magikarp flopping in vain!",
          img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/129.png"
        };
      } else if (ratio < 70) {
        return {
          message: "Subpar pullâ€”Caterpie/Weedle-level luck.",
          img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/10.png"
        };
      } else if (ratio < 90) {
        return {
          message: "Near averageâ€”Pidgey or Rattata pace.",
          img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/16.png"
        };
      } else if (ratio < 110) {
        return {
          message: "Slightly above oddsâ€”Charmanderâ€™s ember glows!",
          img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png"
        };
      } else if (ratio < 130) {
        return {
          message: "Great pullâ€”Charmeleon/Charizard-level heat!",
          img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/6.png"
        };
      } else {
        return {
          message: "Mewtwo-level masteryâ€”defying normal logic!",
          img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/150.png"
        };
      }
    }

    // Featured PokÃ©mon selection based on scaled overall luck
    function selectFeaturedPokemon(scaledLuck) {
      if (scaledLuck < 20) {
        return {
          name: "Magikarp",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/129.png",
          ability: "Splash",
          abilityDesc: "It flops around so much, it's hilarious but utterly ineffective!"
        };
      } else if (scaledLuck < 40) {
        return {
          name: "Caterpie",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/10.png",
          ability: "Bug Bite",
          abilityDesc: "A tiny nibble that barely makes a mark."
        };
      } else if (scaledLuck < 60) {
        return {
          name: "Pikachu",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png",
          ability: "Thunder Shock",
          abilityDesc: "A mild zap that sparks a bit of luck."
        };
      } else if (scaledLuck < 80) {
        return {
          name: "Charmander",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png",
          ability: "Ember",
          abilityDesc: "A small flame that hints at rising fortune."
        };
      } else if (scaledLuck < 100) {
        return {
          name: "Charizard",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/6.png",
          ability: "Flamethrower",
          abilityDesc: "Incinerates any lingering bad luck with blazing fury!"
        };
      } else {
        return {
          name: "Mewtwo",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/150.png",
          ability: "Psychic Blast",
          abilityDesc: "Bends reality with an unstoppable surge of fortune!"
        };
      }
    }

    // Raining effect for featured PokÃ©mon
    function rainFeaturedPokemon(imgURL) {
      for (let i = 0; i < 150; i++) {
        const drop = document.createElement('img');
        drop.src = imgURL;
        drop.classList.add('raining-pokemon');
        drop.style.width = "80px";
        drop.style.left = Math.random() * 100 + 'vw';
        const duration = (Math.random() * 3 + 5).toFixed(2);
        drop.style.animationDuration = duration + "s";
        const delay = (Math.random() * 2).toFixed(2);
        drop.style.animationDelay = delay + "s";
        drop.style.animationName = "fallPokemon";
        document.body.appendChild(drop);
        drop.addEventListener('animationend', () => drop.remove());
      }
    }

    // Confetti effect for very high luck
    function launchConfetti() {
      for (let i = 0; i < 30; i++) {
        const conf = document.createElement('div');
        conf.classList.add('confetti');
        const colors = ['#ff6384','#36a2eb','#ffcd56','#4bc0c0','#9966ff','#f77737'];
        conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        conf.style.left = Math.random() * 100 + 'vw';
        document.body.appendChild(conf);
        conf.addEventListener('animationend', () => conf.remove());
      }
    }

    // MAIN LOGIC: Form submission event
    document.getElementById('luckForm').addEventListener('submit', function(e) {
      e.preventDefault();

      // 1) Get user inputs
      const totalPacks = parseInt(document.getElementById('totalPacks').value) || 0;
      const godPacks = parseInt(document.getElementById('godPacks').value) || 0;
      const normalPacks = totalPacks - godPacks;

      // 2) Actual pulls from user inputs (only non-diamond outcomes are tracked)
      const actual = {
        fourDiamond: parseInt(document.getElementById('fourDiamond').value) || 0,
        oneStar: parseInt(document.getElementById('oneStar').value) || 0,
        twoStar: parseInt(document.getElementById('twoStar').value) || 0,
        threeStar: parseInt(document.getElementById('threeStar').value) || 0,
        crown: parseInt(document.getElementById('crown').value) || 0
      };

      // 3) Expected values for normal packs (non-diamond outcomes only)
      const expNormal = {
        fourDiamond: pNormal.fourDiamond * normalPacks,
        oneStar: pNormal.oneStar * normalPacks,
        twoStar: pNormal.twoStar * normalPacks,
        threeStar: pNormal.threeStar * normalPacks,
        crown: pNormal.crown * normalPacks
      };

      // 4) Expected values for God Packs (each God Pack gives 5 cards; no Diamond outcomes)
      const expGod = {
        fourDiamond: 0,
        oneStar: pGod.oneStar * 5 * godPacks,
        twoStar: pGod.twoStar * 5 * godPacks,
        threeStar: pGod.threeStar * 5 * godPacks,
        crown: pGod.crown * 5 * godPacks
      };

      // 5) Combine expected values (only for keys in expNormal: fourDiamond, oneStar, twoStar, threeStar, crown)
      let sumExp = 0;
      let sumAct = 0;
      const expTotal = {};
      for (let r in expNormal) {
        expTotal[r] = expNormal[r] + expGod[r];
        sumExp += expTotal[r];
        sumAct += actual[r];
      }

      // 6) Build breakdown HTML for each rarity
      let breakdownHtml = '';
      for (let rarity in expTotal) {
        const eVal = expTotal[rarity];
        const aVal = actual[rarity];
        const ratio = eVal > 0 ? (aVal / eVal) * 100 : 0;
        const diff = eVal > 0 ? ((aVal - eVal) / eVal) * 100 : 0;
        const desc = getDescriptionForLuck(ratio);
        const icon = rarityIcons[rarity] || '';

        breakdownHtml += `
          <div class="rarity-card">
            <div class="breakdown-header"><strong>${rarity.toUpperCase()}</strong></div>
            <div class="breakdown-info">
              <span class="breakdown-icon">${icon}</span>
              <div class="breakdown-text">
                <p>Expected: ${eVal.toFixed(2)}</p>
                <p>Your Pulls: ${aVal}</p>
                <p>Luck: ${ratio.toFixed(2)}%</p>
                <p>Diff: ${diff.toFixed(2)}%</p>
              </div>
            </div>
            <div class="rarity-description">
              <img src="${desc.img}" alt="desc icon">
              <span>${desc.message}</span>
            </div>
          </div>
        `;
      }

      // 7) Calculate overall luck (as a percentage)
      const overallLuck = sumExp > 0 ? (sumAct / sumExp) * 100 : 0;
      const overallLuckNum = parseFloat(overallLuck.toFixed(2));
      document.getElementById('overallLuck').textContent = overallLuckNum + "%";

      // 8) Set a basic luck message
      let luckMsg = "";
      if (overallLuckNum < 80) {
        luckMsg = "Your pulls are a bit off today. Better luck next time!";
      } else if (overallLuckNum < 100) {
        luckMsg = "Not badâ€”you're near average. Keep trying!";
      } else if (overallLuckNum < 120) {
        luckMsg = "Great pulls! You're above the odds!";
      } else if (overallLuckNum < 140) {
        luckMsg = "Amazing luck! You're on fire, trainer!";
      } else {
        luckMsg = "Incredible luckâ€”time to celebrate with a PokÃ©-party!";
        launchConfetti();
      }
      document.getElementById('luckMessage').textContent = luckMsg;
      document.getElementById('rarityBreakdown').innerHTML = breakdownHtml;
      document.getElementById('results').style.display = 'block';

      // 8) Scroll to results section
      document.getElementById('results').scrollIntoView({ behavior: 'smooth' });

      // 9) Rescale overall luck (raw overall luck, typically near 100, mapped from 80â€“120 â†’ 0â€“100)
      let scaledLuck = 0;
      if (overallLuckNum < 80) scaledLuck = 0;
      else if (overallLuckNum > 120) scaledLuck = 100;
      else scaledLuck = ((overallLuckNum - 80) / 40) * 100;

      // 10) Choose final featured PokÃ©mon based on scaled luck
      const featured = selectFeaturedPokemon(scaledLuck);

      // 11) Display featured PokÃ©mon
      document.getElementById('featuredImg').src = featured.image;
      document.getElementById('featuredImg').alt = featured.name;
      document.getElementById('featuredName').textContent = featured.name;
      document.getElementById('featuredDescription').textContent = luckMsg;
      document.getElementById('featuredAbility').textContent =
        "Ability: " + featured.ability + " â€“ " + featured.abilityDesc;
      document.getElementById('featuredPokemon').style.display = 'block';

      // 12) Trigger raining PokÃ©mon effect
      rainFeaturedPokemon(featured.image);
    });

    // Featured PokÃ©mon selection based on scaled overall luck
    function selectFeaturedPokemon(scaledLuck) {
      if (scaledLuck < 20) {
        return {
          name: "Magikarp",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/129.png",
          ability: "Splash",
          abilityDesc: "It flops around so much, it's hilarious but utterly ineffective!"
        };
      } else if (scaledLuck < 40) {
        return {
          name: "Caterpie",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/10.png",
          ability: "Bug Bite",
          abilityDesc: "A tiny nibble that barely makes a mark."
        };
      } else if (scaledLuck < 60) {
        return {
          name: "Pikachu",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png",
          ability: "Thunder Shock",
          abilityDesc: "A mild zap that sparks a bit of luck."
        };
      } else if (scaledLuck < 80) {
        return {
          name: "Charmander",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png",
          ability: "Ember",
          abilityDesc: "A small flame that hints at rising fortune."
        };
      } else if (scaledLuck < 100) {
        return {
          name: "Charizard",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/6.png",
          ability: "Flamethrower",
          abilityDesc: "Incinerates any lingering bad luck with blazing fury!"
        };
      } else {
        return {
          name: "Mewtwo",
          image: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/150.png",
          ability: "Psychic Blast",
          abilityDesc: "Bends reality with an unstoppable surge of fortune!"
        };
      }
    }

    // Raining effect for featured PokÃ©mon
    function rainFeaturedPokemon(imgURL) {
      for (let i = 0; i < 150; i++) {
        const drop = document.createElement('img');
        drop.src = imgURL;
        drop.classList.add('raining-pokemon');
        drop.style.width = "80px";
        drop.style.left = Math.random() * 100 + 'vw';
        const duration = (Math.random() * 3 + 5).toFixed(2);
        drop.style.animationDuration = duration + "s";
        const delay = (Math.random() * 2).toFixed(2);
        drop.style.animationDelay = delay + "s";
        drop.style.animationName = "fallPokemon";
        document.body.appendChild(drop);
        drop.addEventListener('animationend', () => drop.remove());
      }
    }

    // Confetti for extremely high luck
    function launchConfetti() {
      for (let i = 0; i < 30; i++) {
        const conf = document.createElement('div');
        conf.classList.add('confetti');
        const colors = ['#ff6384','#36a2eb','#ffcd56','#4bc0c0','#9966ff','#f77737'];
        conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        conf.style.left = Math.random() * 100 + 'vw';
        document.body.appendChild(conf);
        conf.addEventListener('animationend', () => conf.remove());
      }
    }
  </script>
</body>
</html>